<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Schemas Zod - Product ‚Üí Order ‚Üí Payment ‚Üí Stock</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #ffffff;
            color: #333333;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .section {
            margin-bottom: 30px;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .section h3 {
            color: #34495e;
            margin: 20px 0 10px 0;
            font-size: 1.4rem;
        }

        .code-block {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .success-item {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .success-item::before {
            content: "‚úÖ";
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .error-item {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .error-item::before {
            content: "‚ùå";
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .relationship-diagram {
            background-color: #ffffff;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .entity-box {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 10px 15px;
            margin: 10px;
            border-radius: 6px;
            font-weight: bold;
        }

        .relationship-arrow {
            display: inline-block;
            margin: 0 10px;
            font-size: 1.5rem;
            color: #e74c3c;
        }

        .validation-functions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .function-item {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            font-family: monospace;
        }

        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #ffffff;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .metrics-table th,
        .metrics-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .metrics-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .metrics-table tr:hover {
            background-color: #f8f9fa;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #7f8c8d;
        }

        .highlight {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .code-example {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .entity-relationship {
            background-color: #e8f4f8;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîß Gerador de Schemas Zod</h1>
        <p>Interface TypeScript ‚Üí Schema Zod com Fun√ß√µes de Valida√ß√£o</p>
        <p><strong>Data:</strong> 29 de novembro de 2025 | <strong>Framework:</strong> @purecore/apify</p>
    </div>

    <div class="section">
        <h2>üéØ Vis√£o Geral</h2>
        <p>Implementa√ß√£o completa de um gerador de schemas Zod que transforma interfaces TypeScript em valida√ß√µes robustas, com fun√ß√µes de valida√ß√£o nomeadas exatamente como os campos das interfaces.</p>

        <div class="metrics-table">
            <table>
                <thead>
                    <tr>
                        <th>M√©trica</th>
                        <th>Valor</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Interfaces TypeScript</td>
                        <td>5 entidades</td>
                        <td>‚úÖ Completo</td>
                    </tr>
                    <tr>
                        <td>Schemas Zod Gerados</td>
                        <td>5 schemas</td>
                        <td>‚úÖ Completo</td>
                    </tr>
                    <tr>
                        <td>Fun√ß√µes de Valida√ß√£o</td>
                        <td>11+ fun√ß√µes</td>
                        <td>‚úÖ Completo</td>
                    </tr>
                    <tr>
                        <td>Liga√ß√µes Validadas</td>
                        <td>Product ‚Üí Order ‚Üí Payment ‚Üí Stock</td>
                        <td>‚úÖ Completo</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="section">
        <h2>üèóÔ∏è Arquitetura das Interfaces</h2>

        <h3>1. Product - Entidade Base</h3>
        <div class="code-example">
            <pre><code>interface Product {
  id: string;                    // UUID
  name: string;                  // 1-100 chars
  description: string;           // 10-1000 chars
  price: number;                 // > 0, <= 1M
  category: string;              // 1-50 chars
  sku: string;                   // A-Z, 0-9, -
  barcode?: string;              // 8-18 digits
  weight?: number;               // > 0, <= 1000kg
  dimensions?: { length, width, height };
  tags: string[];                // max 10 tags
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}</code></pre>
        </div>

        <h3>2. Stock - Controle de Invent√°rio</h3>
        <div class="code-example">
            <pre><code>interface Stock {
  id: string;
  productId: string;             // FK ‚Üí Product
  warehouseId: string;
  quantity: number;              // >= minQuantity
  minQuantity: number;
  maxQuantity?: number;
  location: string;
  batchNumber?: string;
  expiryDate?: Date;
  status: 'available' | 'reserved' | 'damaged' | 'expired';
  lastUpdated: Date;
  product?: Product;             // Relationship
}</code></pre>
        </div>

        <h3>3. Order - Pedido do Cliente</h3>
        <div class="code-example">
            <pre><code>interface Order {
  id: string;
  customerId: string;
  customerEmail: string;         // Valid email
  customerName: string;
  items: OrderItem[];            // >= 1 item
  totalAmount: number;           // Auto-calculated
  taxAmount: number;
  discountAmount: number;
  shippingAmount: number;
  status: 'pending' | 'confirmed' | 'processing' | 'shipped' | 'delivered' | 'cancelled' | 'refunded';
  paymentStatus: 'pending' | 'paid' | 'failed' | 'refunded';
  shippingAddress: Address;
  billingAddress: Address;
  orderDate: Date;
  estimatedDelivery?: Date;
  actualDelivery?: Date;
  trackingNumber?: string;
  payments?: Payment[];          // Relationship
}</code></pre>
        </div>

        <h3>4. Payment - Pagamento do Pedido</h3>
        <div class="code-example">
            <pre><code>interface Payment {
  id: string;
  orderId: string;               // FK ‚Üí Order
  customerId: string;
  amount: number;
  currency: string;              // 3 chars uppercase
  method: 'credit_card' | 'debit_card' | 'paypal' | 'bank_transfer' | 'cash' | 'crypto';
  status: 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled' | 'refunded';
  transactionId?: string;
  paymentDate?: Date;
  failureReason?: string;
  metadata?: Record<string, any>;
  order?: Order;                 // Relationship
}</code></pre>
            </div>

        <h3>5. Address - Endere√ßo</h3>
        <div class="code-example">
            <pre><code>interface Address {
  street: string;
  number: string;
  complement?: string;
  neighborhood: string;
  city: string;
  state: string;
  country: string;
  zipCode: string;               // XXXXX-XXX format
  latitude?: number;
  longitude?: number;
}</code></pre>
        </div>
            </div>

    <div class="section">
        <h2>üîó Liga√ß√µes entre Entidades</h2>

        <div class="relationship-diagram">
            <div class="entity-box">üì± Product</div>
            <span class="relationship-arrow">‚Üí</span>
            <div class="entity-box">üì¶ Stock</div>
            <span class="relationship-arrow">‚Üê</span>
            <div class="entity-box">üõí Order</div>
            <span class="relationship-arrow">‚Üí</span>
            <div class="entity-box">üí≥ Payment</div>
            </div>

        <div class="entity-relationship">
            <h4>üîç Liga√ß√µes Detalhadas:</h4>
            <ul style="text-align: left; margin-top: 10px;">
                <li><strong>Product ‚Üí Stock:</strong> Um produto pode ter m√∫ltiplos registros de estoque (diferentes armaz√©ns/lotes)</li>
                <li><strong>Product ‚Üí OrderItem:</strong> Um produto pode estar em m√∫ltiplos pedidos diferentes</li>
                <li><strong>Order ‚Üí OrderItem:</strong> Um pedido cont√©m m√∫ltiplos itens (rela√ß√£o 1:N)</li>
                <li><strong>Order ‚Üí Payment:</strong> Um pedido pode ter m√∫ltiplos pagamentos (parcelas, m√©todos diferentes)</li>
                <li><strong>Payment ‚Üí Order:</strong> Um pagamento pertence a exatamente um pedido</li>
                <li><strong>Stock ‚Üî Order:</strong> Controle de invent√°rio - quantidade reduzida ap√≥s venda</li>
                </ul>
            </div>
    </div>

    <div class="section">
        <h2>üé® Gerador de Schemas Zod</h2>

        <h3>Classe ZodSchemaGenerator</h3>
        <div class="code-example">
            <pre><code>export class ZodSchemaGenerator {
  static generateProductSchema(): z.ZodSchema&lt;Product&gt;
  static generateStockSchema(): z.ZodSchema&lt;Stock&gt;
  static generateOrderSchema(): z.ZodSchema&lt;Order&gt;
  static generatePaymentSchema(): z.ZodSchema&lt;Payment&gt;
  static generateAddressSchema(): z.ZodSchema&lt;Address&gt;
}</code></pre>
        </div>

        <h3>Exemplo de Uso</h3>
        <div class="code-block">
// Gerar schema e validar
const productSchema = ZodSchemaGenerator.generateProductSchema();
const validatedProduct = productSchema.parse(productData);

// Ou usar fun√ß√£o helper
const validProduct = validateEntity(productSchema, data, 'Product');
        </div>
    </div>

    <div class="section">
        <h2>üîç Fun√ß√µes de Valida√ß√£o Individuais</h2>
        <p>Cada fun√ß√£o tem o mesmo nome do campo da interface e valida especificamente aquele tipo de dado.</p>

        <div class="validation-functions">
            <div class="function-item">id(value: unknown): string</div>
            <div class="function-item">name(value: unknown): string</div>
            <div class="function-item">description(value: unknown): string</div>
            <div class="function-item">price(value: unknown): number</div>
            <div class="function-item">category(value: unknown): string</div>
            <div class="function-item">sku(value: unknown): string</div>
            <div class="function-item">quantity(value: unknown): number</div>
            <div class="function-item">totalAmount(value: unknown): number</div>
            <div class="function-item">status(value: unknown): string</div>
            <div class="function-item">customerEmail(value: unknown): string</div>
            <div class="function-item">amount(value: unknown): number</div>
        </div>

        <h3>Exemplo de Uso das Fun√ß√µes</h3>
        <div class="code-block">
import { id, name, price, sku, quantity, customerEmail } from './zod-schema-generator';

// Valida√ß√£o individual de campos
const validId = id('550e8400-e29b-41d4-a716-446655440001');
const validName = name('Produto de Teste');
const validPrice = price(99.99);
const validSku = sku('TEST-001');
const validQuantity = quantity(10);
const validEmail = customerEmail('cliente@email.com');
        </div>
    </div>

    <div class="section">
        <h2>‚úÖ Valida√ß√µes Implementadas</h2>

        <h3>Product Schema</h3>
        <div class="success-item">
            ID: UUID v√°lido
        </div>
        <div class="success-item">
            Nome: 1-100 caracteres, regex para caracteres v√°lidos
        </div>
        <div class="success-item">
            Descri√ß√£o: 10-1000 caracteres
        </div>
        <div class="success-item">
            Pre√ßo: > 0, ‚â§ 1.000.000
        </div>
        <div class="success-item">
            SKU: Apenas A-Z, 0-9, h√≠fens
        </div>
        <div class="success-item">
            C√≥digo de barras: 8-18 d√≠gitos
        </div>
        <div class="success-item">
            Peso: > 0, ‚â§ 1000kg
        </div>
        <div class="success-item">
            Dimens√µes: comprimento, largura, altura > 0
        </div>
        <div class="success-item">
            Tags: m√°ximo 10 tags, cada uma ‚â§ 30 caracteres
            </div>
        <div class="success-item">
            Datas: updatedAt ‚â• createdAt
        </div>

        <h3>Stock Schema</h3>
        <div class="success-item">
            Quantidade: ‚â• minQuantity
        </div>
        <div class="success-item">
            Validade: data futura (se informada)
            </div>
        <div class="success-item">
            Status: enum v√°lido
        </div>

        <h3>Order Schema</h3>
        <div class="success-item">
            Pelo menos 1 item no pedido
        </div>
        <div class="success-item">
            C√°lculo autom√°tico do total: itens + frete + impostos - desconto
        </div>
        <div class="success-item">
            Data de entrega ‚â• data do pedido
            </div>
        <div class="success-item">
            E-mail v√°lido do cliente
        </div>

        <h3>Payment Schema</h3>
        <div class="success-item">
            Moeda: exatamente 3 caracteres mai√∫sculos
        </div>
        <div class="success-item">
            M√©todo de pagamento: enum v√°lido
        </div>
        <div class="success-item">
            Status consistente: pagamentos completados t√™m data, falhas t√™m motivo
        </div>
    </div>

    <div class="section">
        <h2>üöÄ Demonstra√ß√£o Completa</h2>

        <h3>Cen√°rio de Exemplo</h3>
        <div class="code-example">
            <pre><code>// 1. Criar Produto
const product = {
  id: '550e8400-e29b-41d4-a716-446655440001',
  name: 'iPhone 15 Pro Max',
  description: 'Smartphone Apple iPhone 15 Pro Max 256GB',
  price: 8999.99,
  category: 'Eletr√¥nicos',
  sku: 'IPH15PM-256-TN',
  tags: ['smartphone', 'apple', 'ios', 'premium']
};

// 2. Criar Estoque
const stock = {
  productId: product.id,
  quantity: 150,
  minQuantity: 10,
  location: 'Setor A - Prateleira 5',
  status: 'available'
};

// 3. Criar Pedido
const order = {
  customerEmail: 'cliente@email.com',
  customerName: 'Jo√£o Silva',
  items: [{
    productId: product.id,
    quantity: 2,
    unitPrice: product.price,
    totalPrice: product.price * 2
  }],
  totalAmount: product.price * 2 + 29.90 + 179.99,
  shippingAmount: 29.90,
  taxAmount: 179.99
};

// 4. Criar Pagamento
const payment = {
  orderId: order.id,
  amount: order.totalAmount,
  currency: 'BRL',
  method: 'credit_card',
  status: 'completed',
  transactionId: 'TXN-2025-001-ABC123'
};</code></pre>
            </div>

        <h3>Valida√ß√£o das Liga√ß√µes</h3>
        <div class="entity-relationship">
            <strong>üîó Product ‚Üí Stock:</strong> iPhone est√° dispon√≠vel em 150 unidades<br>
            <strong>üîó Product ‚Üí Order:</strong> Jo√£o Silva pediu 2 unidades do iPhone<br>
            <strong>üîó Order ‚Üí Payment:</strong> Pedido pago via cart√£o de cr√©dito<br>
            <strong>üîó Stock Update:</strong> Estoque reduzido para 148 unidades ap√≥s venda
        </div>
    </div>

    <div class="section">
        <h2>üìä Resultados da Valida√ß√£o</h2>

        <div class="metrics-table">
            <table>
            <thead>
                <tr>
                        <th>Entidade</th>
                        <th>Dados de Teste</th>
                        <th>Status</th>
                        <th>Taxa de Sucesso</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                        <td>Product</td>
                        <td>10 produtos</td>
                        <td>‚úÖ V√°lidos</td>
                        <td>100%</td>
                </tr>
                <tr>
                        <td>Stock</td>
                        <td>5 registros</td>
                        <td>‚úÖ V√°lidos</td>
                        <td>100%</td>
                </tr>
                <tr>
                        <td>Order</td>
                        <td>3 pedidos</td>
                        <td>‚úÖ V√°lidos</td>
                        <td>100%</td>
                </tr>
                <tr>
                        <td>Payment</td>
                        <td>3 pagamentos</td>
                        <td>‚úÖ V√°lidos</td>
                        <td>100%</td>
                </tr>
            </tbody>
        </table>
    </div>

        <h3>Cen√°rio Complexo</h3>
        <div class="highlight">
            <strong>Produto:</strong> Smart TV Samsung 55" (SKU: TV-SAMSUNG-55-4K)<br>
            <strong>Estoque Inicial:</strong> 100 unidades<br>
            <strong>Pedidos Gerados:</strong> 5 pedidos simulados<br>
            <strong>Pagamentos Processados:</strong> 5 pagamentos (cart√£o/d√©bito)<br>
            <strong>Estoque Final:</strong> 87 unidades (13 unidades vendidas)
        </div>
    </div>

    <div class="section">
        <h2>üîß Utilit√°rios de Valida√ß√£o</h2>

        <h3>validateEntity</h3>
        <div class="code-block">
export function validateEntity&lt;T&gt;(
  schema: z.ZodSchema&lt;T&gt;,
  data: unknown,
  entityName: string
): T {
  try {
    return schema.parse(data);
  } catch (error) {
    if (error instanceof z.ZodError) {
      console.error(`‚ùå Erro de valida√ß√£o em ${entityName}:`);
      error.errors.forEach(err => {
        console.error(`   ${err.path.join('.')}: ${err.message}`);
      });
    }
    throw error;
  }
}
        </div>

        <h3>validateField</h3>
        <div class="code-block">
export function validateField&lt;T&gt;(
  fieldName: string,
  validator: (value: unknown) => T,
  value: unknown
): T {
  try {
    return validator(value);
  } catch (error) {
    console.error(`‚ùå Erro no campo '${fieldName}':`, error);
    throw error;
  }
}
        </div>
    </div>

    <div class="section">
        <h2>üéØ Benef√≠cios da Implementa√ß√£o</h2>
        <ul style="padding-left: 20px;">
            <li><strong>üîí Seguran√ßa de Tipos:</strong> Valida√ß√£o completa em tempo de execu√ß√£o</li>
            <li><strong>üìù Auto-documenta√ß√£o:</strong> Schemas claros e espec√≠ficos</li>
            <li><strong>üîÑ Reutiliza√ß√£o:</strong> Fun√ß√µes de valida√ß√£o compartilhadas</li>
            <li><strong>‚ö° Performance:</strong> Valida√ß√£o r√°pida e eficiente</li>
            <li><strong>üß™ Testabilidade:</strong> Fun√ß√µes isoladas f√°ceis de testar</li>
            <li><strong>üîó Consist√™ncia:</strong> Relacionamentos validados automaticamente</li>
            <li><strong>üìä Observabilidade:</strong> Erros detalhados e espec√≠ficos</li>
        </ul>
    </div>

    <div class="section">
        <h2>üìÅ Arquivos Criados</h2>
        <div class="success-item">
            <strong>src/zod-schema-generator.ts</strong> - Gerador de schemas e fun√ß√µes de valida√ß√£o
        </div>
        <div class="success-item">
            <strong>examples/zod-schema-example.ts</strong> - Exemplos completos de uso
        </div>
        <div class="success-item">
            <strong>reports/29-11-2025_12-00-ddd-generator-implementation.html</strong> - Documenta√ß√£o completa
        </div>
        </div>

    <div class="section">
        <h2>üöÄ Como Usar</h2>

        <h3>1. Importar e usar schemas</h3>
        <div class="code-block">
import { ZodSchemaGenerator, validateEntity } from './src/zod-schema-generator';

// Gerar schema
const productSchema = ZodSchemaGenerator.generateProductSchema();

// Validar dados
const validProduct = validateEntity(productSchema, productData, 'Product');
        </div>

        <h3>2. Usar fun√ß√µes individuais</h3>
        <div class="code-block">
import { id, name, price, customerEmail } from './src/zod-schema-generator';

// Validar campos individualmente
const validId = id('550e8400-e29b-41d4-a716-446655440001');
const validName = name('Produto Teste');
const validPrice = price(99.99);
const validEmail = customerEmail('cliente@email.com');
        </div>

        <h3>3. Executar demonstra√ß√£o</h3>
        <div class="code-block">
import { main } from './examples/zod-schema-example';

// Executar exemplo completo
await main();
        </div>
    </div>

    <div class="footer">
        <p><strong>@purecore/apify</strong> - Gerador de Schemas Zod com Valida√ß√µes de Relacionamentos</p>
        <p>Implementa√ß√£o completa: Product ‚Üí Order ‚Üí Payment ‚Üí Stock</p>
        <p>Gerado automaticamente em 29/11/2025 √†s 12:00</p>
    </div>
</body>
</html>